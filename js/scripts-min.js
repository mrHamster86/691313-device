var linkMap=document.querySelector(".min-map"),modalMap=document.querySelector(".modal--map"),linkWrite=document.querySelector(".contacts__btn"),modalWrite=document.querySelector(".modal--write-us"),form=modalWrite.querySelector("form"),userName=modalWrite.querySelector("[name=your-name]"),email=modalWrite.querySelector("[name=your-email]"),emails=modalWrite.querySelector("[name=text-emails]"),isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("userName"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}form.addEventListener("submit",function(e){userName.value&&email.value&&emails.value?isStorageSupport&&(localStorage.setItem("userName",storageName.value),localStorage.setItem("email",storageEmail.value)):(e.preventDefault(),modalWrite.classList.remove("modal--error"),modalWrite.offsetWidth=modalWrite.offsetWidth,modalWrite.classList.add("modal--error"))}),linkMap.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.add("modal--show")}),linkWrite.addEventListener("click",function(e){e.preventDefault(),modalWrite.classList.add("modal--show"),storageName?(userName.value=storageName,email.value=storageMail,emails.focus()):userName.focus()});var closeMap=modalMap.querySelector(".modal__close"),closeWrite=modalWrite.querySelector(".modal__close");closeMap.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.remove("modal--show")}),closeWrite.addEventListener("click",function(e){e.preventDefault(),modalWrite.classList.remove("modal--show"),modalWrite.classList.remove("modal--error")}),window.addEventListener("keydown",function(e){if(27===e.keyCode){e.preventDefault();var a=document.querySelector(".modal--show");a.classList.contains("modal--show")&&(a.classList.remove("modal--show"),modalWrite.classList.remove("modal--error"))}});